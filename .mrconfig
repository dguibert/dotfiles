[DEFAULT]
git_gc = git gc "$@"
include = cat $(dirname $(dirname $(type -P mr)))/share/mr/git-annex
lib = 
	     source $HOME/.config/mr/lib/git-remotes
	  git_annex_sync() { git annex -v sync --content; }
	  new_git_annexed_repo() {
	    git init $MR_REPO
	    cd $MR_REPO
	    git annex init
	    git_annex_sync
	  }
push = echo "$MR_REPO has to be manually pushed"

include = cat $HOME/.config/mr/config.d/*

[$HOME/.config/vcsh/repo.d/dotfiles.git]
checkout = 
	  vcsh clone --recursive git@github.com:dguibert/dotfiles.git
#  vcsh dotfiles remote add remote_name remote_url
fixups = vcsh dotfiles remote add public_git ~/public_git/dotfiles.git

push = 
	  vcsh dotfiles push
	  vcsh dotfiles push public_git
#  vcsh dotfiles push remote_name


[admin/nix-easybuild]
checkout = git clone 'https://github.com/rjeschmi/nix-easybuild' 'nix-easybuild'
fixups = git_add_remotes "
	   public_git ~/public_git/nix-easybuild.git
	   "
push = git push -v public_git

[code/bedrocklinux-userland]
checkout = git clone 'https://github.com/paradigm/bedrocklinux-userland' 'bedrocklinux-userland'

[code/de.intevation.roundup-fast]
checkout = hg clone 'http://hg.intevation.org/roundup/fast-decomposed' 'de.intevation.roundup-fast'

[code/blockit]
checkout = git clone 'git://blockit.git.sourceforge.net/gitroot/blockit/blockit' 'blockit'

[code/cctools]
checkout = git clone 'git://github.com/cooperative-computing-lab/cctools.git' 'cctools'

[code/chapel]
checkout = git clone 'https://github.com/chapel-lang/chapel' 'chapel'

[code/dmtcp]
checkout = git clone 'https://github.com/dmtcp/dmtcp' 'dmtcp'

[code/gc3pie]
checkout = git clone 'https://github.com/uzh/gc3pie' 'gc3pie'

[code/git]
checkout = git clone 'git://github.com/gitster/git.git' 'git'

[code/git-annex]
checkout = git clone 'git://github.com/joeyh/git-annex.git' 'git-annex'

[code/git-bpf]
checkout = git clone 'https://github.com/affinitybridge/git-bpf' 'git-bpf'

[code/git-integration]
checkout = git clone 'https://github.com/johnkeeping/git-integration' 'git-integration'

[code/haskell-fortran/camfort]
checkout = git clone 'https://github.com/dorchard/camfort' 'camfort'

[code/haskell-fortran/language-fortran]
checkout = git clone 'https://github.com/dagit/language-fortran' 'language-fortran'

[code/hpx]
checkout = git clone 'https://github.com/STEllAR-GROUP/hpx' 'hpx'

[code/imp-demo]
deleted = true

[code/imp-code]
checkout = hg clone 'https://dguibert@bitbucket.org/VictorEijkhout/imp-code' 'imp-code'

[code/kokkos]
checkout = git clone 'https://github.com/kokkos/kokkos' 'kokkos'

[code/mosh-cleaner]
checkout = git clone 'git://git.zx2c4.com/mosh-cleaner' 'mosh-cleaner'

[code/propellor]
checkout = git clone 'git://git.kitenet.net/propellor.git' 'propellor'

[code/shqq]
checkout = git clone 'git://github.com/kmcallister/shqq' 'shqq'

[code/spack]
checkout = git clone 'https://github.com/scalability-llnl/spack' 'spack'
fixups = git_add_remotes "
	   public_git ~/public_git/spack.git
	   "
push = git push -v public_git


[code/training-gerrit]
checkout = git clone 'https://gerrit.googlesource.com/training/gerrit' 'training-gerrit'

[code/nixpkgs]
checkout = git clone 'git@github.com:dguibert/nixpkgs.git' 'nixpkgs'
fixups = git_add_remotes "
	   github https://github.com/NixOS/nixpkgs
	 "
	 git config --get-all remote.origin.fetch "/heads/dg/" &>/dev/null || git config --add remote.origin.fetch refs/heads/dg/*:refs/heads/dg/*
	 git config --get-all remote.origin.fetch "refs/int/pu" &>/dev/null || git config --add remote.origin.fetch refs/int/pu:refs/int/pu
	 #git config --get-all remote.github.fetch "/heads/pr/" &>/dev/null || git config --add remote.github.fetch +refs/pull/*/head:refs/heads/pr/*

update = git remote update
push = git push -v origin +pu
	      git push -v origin
	      git push -v origin refs/int/pu:refs/int/pu

[code/git-reintegrate]
checkout = git clone 'https://github.com/felipec/git-reintegrate' 'git-reintegrate'

[code/dwm]
checkout = git clone 'http://git.suckless.org/dwm' 'dwm'

[code/ZeroTierOne]
checkout = git clone 'https://github.com/zerotier/ZeroTierOne' 'ZeroTierOne'

[code/singularity]
checkout = git clone 'https://github.com/gmkurtzer/singularity' 'singularity'

[code/nix]
checkout = git clone 'https://github.com/NixOS/nix' 'nix'

[code/makefile2graph]
checkout = git clone 'https://github.com/lindenb/makefile2graph' 'makefile2graph'

[code/st]
checkout = git clone 'git://git.suckless.org/st' 'st'

[code/myrepos]
checkout = git clone 'https://git.joeyh.name/git/myrepos.git' 'myrepos'
fixups = git_add_remotes "
	origin https://git.joeyh.name/git/myrepos.git/
	"

[code/dvtm]
checkout = git clone 'https://github.com/martanne/dvtm.git' 'dvtm'

[.password-store]
checkout = git init '.password-store'
fixups = git_add_remotes "
	   genji gcrypt::ssh://genji/~/public_git/password-store
	   manny gcrypt::ssh://manny/~/public_git/password-store
	   "
update = git remote update
push = git remote -v | grep push | awk '{print $1}' | xargs --verbose -i git push --all {}

[code/git-subrepo]
checkout = git clone 'https://github.com/ingydotnet/git-subrepo' 'git-subrepo'
push = git push -v public_git
fixups = git_add_remotes "
	   public_git ~/public_git/git-subrepo.git
	   "

[$HOME/work]
checkout = new_git_annexed_repo
push = git_annex_sync

[code/slock]
checkout = git clone 'git://git.suckless.org/slock' 'slock'

[code/git-crypt]
checkout = git clone 'https://github.com/AGWA/git-crypt' 'git-crypt'
fixups = git_add_remotes "
	   public_git ~/public_git/git-crypt.git
	   "
push = git push -v public_git

[code/git-ftp]
checkout = git clone 'https://github.com/git-ftp/git-ftp' 'git-ftp'

[code/nextflow]
checkout = git clone 'https://github.com/nextflow-io/nextflow' 'nextflow'

[code/myrt]
checkout = git clone '/home/dguibert/public_git/myrt.git' 'myrt'
push = git push -v

[code/multigit]
checkout = git clone 'https://github.com/capr/multigit' 'multigit'
fixups = git_add_remotes "
	   public_git ~/public_git/multigit.git
	   "
push = git push -v public_git

[code/git-appraise]
checkout = git clone 'https://github.com/google/git-appraise' 'git-appraise'

[code/git-appraise-web]
checkout = git clone 'https://github.com/google/git-appraise-web' 'git-appraise-web'

[code/nt2]
checkout = git clone 'https://github.com/jtlap/nt2' 'nt2'
fixups = git_add_remotes "
	   picanumber https://github.com/picanumber/nt2
	   public_git ~/public_git/nt2.git
	   "
push = git push -v public_git

[code/cppcon-2015]
checkout = git clone 'https://github.com/jfalcou/cppcon-2015' 'cppcon-2015'

[code/parskel]
checkout = git clone '/home/dguibert/public_git/parskel.git' 'parskel'

[code/sumatra]
checkout = git clone 'https://github.com/open-research/sumatra' 'sumatra'

[code/cylc]
checkout = git clone 'https://github.com/cylc/cylc' 'cylc'

[code/gitolite]
checkout = git clone 'git://github.com/sitaramc/gitolite' 'gitolite'
fixups = git_add_remotes "
	   public_git ~/public_git/gitolite.git
	   "
push = git push -v public_git

[code/nixos-weekly]
checkout = git clone 'https://github.com/NixOS/nixos-weekly' 'nixos-weekly'

[code/ceph-docker]
checkout = git clone 'https://github.com/ceph/ceph-docker' 'ceph-docker'

[code/boost.simd]
checkout = git clone 'https://github.com/NumScale/boost.simd' 'boost.simd'

[code/H5Z-ZFP]
checkout = git clone 'https://github.com/LLNL/H5Z-ZFP' 'H5Z-ZFP'

[code/zfp]
checkout = git clone 'https://github.com/LLNL/zfp' 'zfp'

[code/ravel]
checkout = git clone 'https://github.com/LLNL/ravel' 'ravel'

[code/muster]
checkout = git clone 'https://github.com/LLNL/muster' 'muster'

[code/ceph-ansible]
checkout = git clone 'https://github.com/ceph/ceph-ansible' 'ceph-ansible'

[code/STAT]
checkout = git clone 'https://github.com/LLNL/STAT' 'STAT'

[code/mrnet]
checkout = git clone 'https://github.com/dyninst/mrnet' 'mrnet'

[code/LaunchMON]
checkout = git clone 'https://github.com/LLNL/LaunchMON' 'LaunchMON'

[code/graphlib]
checkout = git clone 'https://github.com/LLNL/graphlib' 'graphlib'

[code/dyninst]
checkout = git clone 'https://github.com/dyninst/dyninst' 'dyninst'

[code/moderngpu]
checkout = git clone 'https://github.com/moderngpu/moderngpu' 'moderngpu'


[code/boost.dispatch]
checkout = git clone 'https://github.com/NumScale/boost.dispatch' 'boost.dispatch'

[code/casync]
checkout = git clone 'https://github.com/systemd/casync' 'casync'

[.nixpkgs/home-manager]
checkout = git clone 'https://github.com/rycee/home-manager' 'home-manager'

[code/charliecloud]
checkout = git clone 'https://github.com/hpc/charliecloud' 'charliecloud'

[code/WireGuard]
checkout = git clone 'https://git.zx2c4.com/WireGuard' 'WireGuard'
